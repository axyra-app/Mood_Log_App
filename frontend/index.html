<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico?v=2" />
    <link rel="shortcut icon" href="/favicon.ico?v=2" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Tu compañero personal para el seguimiento del estado de ánimo con inteligencia artificial"
    />
    <meta name="theme-color" content="#6366f1" />
    <meta name="language" content="es" />
    <meta name="locale" content="es_CO" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <title>Mood Log App - Seguimiento del Estado de Ánimo</title>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CY8FK7SXKQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-CY8FK7SXKQ');
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script>
      // Handle external script errors that might affect the app
      window.addEventListener('error', function (e) {
        if (
          e.message &&
          (e.message.includes('Cannot determine language') ||
            e.message.includes('content-all.js') ||
            e.message.includes('all-frames.js') ||
            e.message.includes('Failed to load resource') ||
            e.message.includes('vite.svg') ||
            e.message.includes('401') ||
            e.message.includes('404') ||
            e.message.includes('400') ||
            e.message.includes('Cannot read properties of undefined') ||
            e.message.includes('Missing or insufficient permissions') ||
            e.message.includes('FirebaseError') ||
            e.message.includes('SyntaxError: Unexpected token') ||
            e.message.includes('Cross-Origin-Opener-Policy') ||
            e.message.includes('Could not establish connection') ||
            e.message.includes('permission-denied') ||
            e.message.includes('Heart is not defined') ||
            e.message.includes('settings is not defined') ||
            e.message.includes('getMessagesRealtime is not defined') ||
            e.message.includes('commonActivities') ||
            e.message.includes('AbortError: The play() request was interrupted') ||
            e.message.includes('Moon is not defined') ||
            e.message.includes('Unexpected token'))
        ) {
          console.warn('External script error suppressed:', e.message);
          e.preventDefault();
          return false;
        }
      });

      window.addEventListener('unhandledrejection', function (e) {
        if (
          e.reason &&
          e.reason.message &&
          (e.reason.message.includes('Cannot determine language') ||
            e.reason.message.includes('content-all.js') ||
            e.reason.message.includes('all-frames.js') ||
            e.reason.message.includes('Failed to load resource') ||
            e.reason.message.includes('vite.svg') ||
            e.reason.message.includes('401') ||
            e.reason.message.includes('404') ||
            e.reason.message.includes('400') ||
            e.reason.message.includes('Cannot read properties of undefined') ||
            e.reason.message.includes('Missing or insufficient permissions') ||
            e.reason.message.includes('FirebaseError') ||
            e.reason.message.includes('permission-denied') ||
            e.reason.message.includes('Cross-Origin-Opener-Policy') ||
            e.reason.message.includes('Could not establish connection') ||
            e.reason.message.includes('Heart is not defined') ||
            e.reason.message.includes('settings is not defined') ||
            e.reason.message.includes('getMessagesRealtime is not defined') ||
            e.reason.message.includes('commonActivities') ||
            e.reason.message.includes('AbortError: The play() request was interrupted') ||
            e.reason.message.includes('Moon is not defined') ||
            e.reason.message.includes('Unexpected token'))
        ) {
          console.warn('External script promise rejection suppressed:', e.reason.message);
          e.preventDefault();
        }
      });

      // Additional error handling for content-all.js specifically
      window.addEventListener('error', function (e) {
        if (e.filename && e.filename.includes('content-all.js')) {
          console.warn('Content-all.js error suppressed:', e.message);
          e.preventDefault();
          return false;
        }
      });
    </script>
  </body>
</html>
